<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
<!--
    @disclaimer
            Any references or links in this document to non-IBM Web sites are provided for convenience 
            only and do not in any manner serve as an endorsement of those non-IBM Web sites or their 
            owners. The materials at the non-IBM Web sites are not owned or licensed by IBM and use of 
            those non-IBM Web sites is at your own risk. IBM makes no representations, warranties, or 
            other commitments whatsoever about any non-IBM Web sites or third-party resources that may 
            be referenced, accessible from, or linked from this document. In addition, IBM is not a 
            party to or responsible for any transactions you may enter into with third parties, even if 
            you learn of such parties (or use a link to such parties) from this document. You are 
            responsible for compliance with any license terms or other obligations for use of the 
            non-IBM Web sites in respect of your use of those non-IBM Web sites. You acknowledge and 
            agree that IBM is not responsible for the availability of such external sites or resources, 
            and is not responsible or liable for any content, services, products, or other materials on 
            or available from those sites or resources. 
-->  
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class DBQueryWorker</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class DBQueryWorker</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
															<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Builds the desired Health Monitorin XQUERY, performs its execution, and frees the result set memory</p>
		<p class="notes">
			Located in <a class="field" href="_producer_db---class.db.worker.query.php.html">/producer_db/class.db.worker.query.php</a> (line <span class="field"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a53">53</a></span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>




	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
												<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
												<div class="method-definition">
					static 						<span class="method-result">void</span>
										<a href="#DBFree" title="details" class="method-name">DBFree</a>
											(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$stmt</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">mixed</span>
										<a href="#DBQuery" title="details" class="method-name">DBQuery</a>
											(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sql</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">mixed</span>
										<a href="#DBQuerySize" title="details" class="method-name">DBQuerySize</a>
											(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">mixed</span>
										<a href="#DBXQuery" title="details" class="method-name">DBXQuery</a>
											(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sql</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">string</span>
										<a href="#DBXQueryAssembleAll" title="details" class="method-name">DBXQueryAssembleAll</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$db</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$lang</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$def</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$det</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$his</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">string</span>
										<a href="#DBXQueryAssembleType" title="details" class="method-name">DBXQueryAssembleType</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$db</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$lang</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$def</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$det</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$his</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$object_type</span>)
									</div>
																<div class="method-definition">
					static 						<span class="method-result">mixed</span>
										<a href="#getByType" title="details" class="method-name">getByType</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$object_type</span>)
									</div>
								
																																																												</div>
		</div>
	</div>		

	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodDBFree" id="DBFree"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">static method DBFree</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a61">61</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Attempts to free the memory associated with the executed query statement, and returned result set</p>
	<ul class="tags">
				<li><span class="field">access:</span> private</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">void</span>
		<span class="method-name">
			DBFree
		</span>
					(<span class="var-type">reference</span>&nbsp;<span class="var-name">&$stmt</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">reference</span>
				<span class="var-name">&$stmt</span><span class="var-description">: the statement whose memory should be freed</span>			</li>
				</ul>
		
			
	</div>
<a name="methodDBQuery" id="DBQuery"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">static method DBQuery</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a77">77</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Executes the desired SQL query statement.</p>
	<ul class="tags">
				<li><span class="field">return:</span> (array of row results on success; <a href="../../DB2HealthMonitorSample/WebServiceProducerDB/DBError.html">DBError</a> object on failure)</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">mixed</span>
		<span class="method-name">
			DBQuery
		</span>
					(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sql</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">resource</span>
				<span class="var-name">$connection</span><span class="var-description">: the connection to the DB2 database</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sql</span><span class="var-description">: the SQL statement to be prepared and executed</span>			</li>
				</ul>
		
			
	</div>
<a name="methodDBQuerySize" id="DBQuerySize"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">static method DBQuerySize</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a212">212</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Prepares and executes the GET_DBSIZE_INFO stored procedure (required prior to executing the desired XQUERY).</p>
<p class="description"><p>The information in the XQUERYs of this application rely on a cached value to be present, hence, this stored  procedure being executed guarantees that the subsequent queries will not fail.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> (true on success; <a href="../../DB2HealthMonitorSample/WebServiceProducerDB/DBError.html">DBError</a> object on failure)</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">mixed</span>
		<span class="method-name">
			DBQuerySize
		</span>
					(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">resource</span>
				<span class="var-name">$connection</span><span class="var-description">: the connection to the specified DB2 database</span>			</li>
				</ul>
		
			
	</div>
<a name="methodDBXQuery" id="DBXQuery"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">static method DBXQuery</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a121">121</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Executes the desired XQUERY statement.</p>
<p class="description"><p>This should only be used on queries that return a single column, where each row of the column is a  standalone xml document (i.e. all are concatenated as a single XML document).</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> (string representation of XML document on success; <a href="../../DB2HealthMonitorSample/WebServiceProducerDB/DBError.html">DBError</a> object on failure)</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">mixed</span>
		<span class="method-name">
			DBXQuery
		</span>
					(<span class="var-type">resource</span>&nbsp;<span class="var-name">$connection</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$sql</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">resource</span>
				<span class="var-name">$connection</span><span class="var-description">: the connection to the DB2 database</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$sql</span><span class="var-description">: the XQUERY statement to be prepared and executed</span>			</li>
				</ul>
		
			
	</div>
<a name="methodDBXQueryAssembleAll" id="DBXQueryAssembleAll"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">static method DBXQueryAssembleAll</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a518">518</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Builds the XQUERY statement to gather health indicator/alert information for ALL  object types (database manager, database, tablespace container, and tablespace).</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">string</span>
		<span class="method-name">
			DBXQueryAssembleAll
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$db</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$lang</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$def</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$det</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$his</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$db</span><span class="var-description">: the name of the database for which health data will be gathered</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$lang</span><span class="var-description">: the language code used to determine the description language</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$def</span><span class="var-description">: the definition request flag to determine whether or not                      to include the part of the XQUERY for gathering definitions</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$det</span><span class="var-description">: the details request flag to determine whether or not to                      include the part of the XQUERY for gathering health details</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$his</span><span class="var-description">: the history request flag to determine whether or not to                      include the part of the XQUERY for gathering health history data</span>			</li>
				</ul>
		
			
	</div>
<a name="methodDBXQueryAssembleType" id="DBXQueryAssembleType"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">static method DBXQueryAssembleType</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a262">262</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Builds the XQUERY statement to gather health indicator/alert information for a  specific type of object (database manager, database, tablespace container, or  tablespace).</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">string</span>
		<span class="method-name">
			DBXQueryAssembleType
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$db</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$lang</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$def</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$det</span>, <span class="var-type">boolean</span>&nbsp;<span class="var-name">$his</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$object_type</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$db</span><span class="var-description">: the name of the database for which health data will be gathered</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$lang</span><span class="var-description">: the language code used to determine the description language</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$def</span><span class="var-description">: the definition request flag to determine whether or not                      to include the part of the XQUERY for gathering definitions</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$det</span><span class="var-description">: the details request flag to determine whether or not to                      include the part of the XQUERY for gathering health details</span>			</li>
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$his</span><span class="var-description">: the history request flag to determine whether or not to                      include the part of the XQUERY for gathering health history data</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$object_type</span><span class="var-description">: string the type of object to gather health data on                                    (database|instance|container|tablespace)</span>			</li>
				</ul>
		
			
	</div>
<a name="methodgetByType" id="getByType"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">static method getByType</span> (line <span class="line-number"><a href="../../__filesource/fsource_DB2HealthMonitorSample_WebServiceProducerDB_producer_dbclass.db.worker.query.php.html#a164">164</a></span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">A helper function that selects the correct parameters with which to build a specific type of XQUERY.</p>
<p class="description"><p>For example, building a Health Report with only 'database' alerts will require all of the specific  parameters/functions listed in the specified array below.</p></p>
	<ul class="tags">
				<li><span class="field">return:</span> (array on success; empty string on failure)</li>
				<li><span class="field">access:</span> private</li>
			</ul>
	
	<div class="method-signature">
	    static
		<span class="method-result">mixed</span>
		<span class="method-name">
			getByType
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$object_type</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$object_type</span><span class="var-description">: indicates the type of object to get query parameters for</span>			</li>
				</ul>
		
			
	</div>

						
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Mon, 23 Jul 2007 13:27:54 -0400 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.2</a>
	</p>
	</div></body>
</html>